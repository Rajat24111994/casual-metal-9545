<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="headder.css" />
    <link rel="stylesheet" href="./styles/dropdown.css" />
    <link rel="stylesheet" href="./styles/cart.css" />
  </head>
  <body>
    <div id="headder">
      <div id="img-link">
        <div>
          <a href="#"
            ><img
              style="width: 100px; padding-top: 10px"
              src="https://images.contentstack.io/v3/assets/blt95e0138311135214/blt13b0f02cd71877df/5f08974a8b0e59084c9f7570/hd-logo-v3.svg?height=32&width=78"
              alt=""
            />
          </a>
        </div>
        <div>
          <img
            style="width: 100px"
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/bltac334446d6f9e89c/5f96fc4f2425cd7a8af6845e/pmall_svg-logo-v2.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/bltf0b1021465476e4f/5f08974b0d1d2008538ce15a/SharisLogo_r.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/bltac303abaae751c40/5f08974af394777f87099a07/18b-logo-v2.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/blt71adcb0696952e83/5f08974baa5d1801639286b4/sch-logo-v2.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/bltef2e14ec247ab827/5f08974a2cd8e87f92bdd257/fb-logo-v2.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/blte1e2eb25cfd09fb6/5f08974a91afb901b86d5251/cco-logo-v2.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/bltf9903ccf2408c217/5f0897552cd8e87f92bdd25b/tpf-logo-v2.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/blt7ef824d3f9f5074d/5f0897558b0e59084c9f7574/wlf-logo-v2.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            src="https://images.contentstack.io/v3/assets/blt95e0138311135214/blta2ba2ac7606f6c15/5f08974bceebbf7e87c30215/sy-logo-v2.svg?height=32&width=78"
            alt=""
          />
        </div>
        <div>
          <img
            style="width: 85px; padding-top: 10px"
            src="https://images.contentstack.io/v3/assets/blt0281495b20b504a0/blta4f709f645453ff0/61b4eeeea000c90ecc6e15bd/VC_Logo_w_tag.svg?height=32&width=78"
            alt=""
          />
        </div>
      </div>

      <div id="nav">
        <div id="nav-left"><a href="index.html">
          <img
            src="https://images.contentstack.io/v3/assets/bltdd99f24e8a94d536/bltce6d6c480577e10e/5d4866eff9ece57fa9a82245/flowers.png?quality=60&auto=webp&optimize={medium}"
            alt=""
          /></a>
        </div>
        <div id="nav-center">
          <input type="text" placeholder="Enter Keyword or Product Number" />
          <button>SEARCH</button>
        </div>
        <div id="nav-right">
          <!-- <i class="fa-regular fa-user"></i>
                  <i class="fa-regular fa-heart"></i>-->
          <div class="signin">
            <i
              ><img
                src="https://images.contentstack.io/v3/assets/bltdd99f24e8a94d536/blt88337dc20d1d8278/5e178293942caf0fc36b77ab/Header-Icon-PWA-profile.svg"
                alt=""
              />
            </i>
            <h5>Sign In</h5>
          </div>
          <div class="orders">
            <i


          
             <a href="./cart.html"


              ><img
                src="https://images.contentstack.io/v3/assets/bltdd99f24e8a94d536/bltd7f3af8e242d37c1/5e1782936430b50f03d6ccc3/Header-Icon-PWA-truck.svg?height=25&width=44"
                alt=""
            /></i>
            <h5>My Orders</h5>
          </div>
          <div class="bag">
            <i
              ><img
                src="https://images.contentstack.io/v3/assets/bltdd99f24e8a94d536/blt7888ec93d3d5c1ec/5e17829300c38f0f022d3646/Header-Icon-PWA-bag.svg?height=25&width=44"
                alt=""
            /></i>
            <h5><span id="cartTotal">(0)</span>Cart</h5>
          </div>
        </div>
      </div>

      <nav>
        <div id="options">
          <ul>
            <li id="birthday"><a href="#">BIRTHDAY</a></li>
            <li id="sympathy"><a href="#">SYMPATHY</a></li>
            <li id="occasion"><a href="#">OCCASIONS</a></li>
            <li id="flowers"><a href="#">FLOWERS</a></li>
            <li id="plants"><a href="#">PLANTS</a></li>
            <li id="food"><a href="#">GIFT BASKETS & FOOD</a></li>
            <li id="gift"><a href="#">GIFTS & MORE</a></li>
            <li id="delivery"><a href="#">SAME-DAY DELIVERY</a></li>
            <li id="sale"><a href="#">SALE</a></li>
            <li id="community"><a href="#">COMMUNITY</a></li>
          </ul>
        </div>
      </nav>

      <div class="nav">
        <div id="product-container">
          <!-- Here Append All the cart Products  -->
        </div>

        <div class="checkout">
          <h1>Order Sumary</h1>
          <div class="details">
            <div>
              <div><p>Original Price</p></div>
              <div id="originalprice">0</div>
            </div>
            <hr />
            <div>
              <div><p>Savings 5%</p></div>
              <div id="savings">0</div>
            </div>
            <hr />
            <div>
              <div><p>Delivery charges</p></div>
              <div id="delivery">Free</div>
            </div>
            <hr />
            <div>
              <div>Taxes 10%</div>
              <div id="tax">0</div>
            </div>
            <hr />
            <div>
              <div>Total Price</div>
              <div id="total">0</div>
            </div>
          </div>
          <div id="check">
            <button><a href="./checkout.html">Proceed TO checkout</a></button>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    // Write all necessery JS here

    let CartContainer = document.getElementById("product-container");

    let Cart = JSON.parse(localStorage.getItem("cart")) || [];
    console.log(Cart)
    function DisplayProduct() {
      let originalprice = document.getElementById("originalprice");
      let savings = document.getElementById("savings");
      let delivery = document.getElementById("delivery");
      let tax = document.getElementById("tax");
      let total = document.getElementById("total");

      CartContainer.innerHTML = "";

      Cart.forEach((product) => {
        let Total=document.getElementById("cartTotal")
          Total.innerText=Cart.length
         
        let image = document.createElement("img");
        let details = document.createElement("p");
        let price = document.createElement("h3");
        let Remove = document.createElement("button");
        let Increase = document.createElement("button");
        let Decrease = document.createElement("button");
        let card = document.createElement("div");
        let quantity = document.createElement("span");

        image.src = product.image;
        details.textContent = product.title;
        price.textContent = product.price;
        Remove.textContent = "Remove";
        Increase.textContent = "+";
        Decrease.textContent = "-";
        quantity.textContent = product.quantity;

        Decrease.addEventListener("click", () => {
          if (product.quantity > 1) {
            product.quantity--;
            localStorage.setItem("cart", JSON.stringify(Cart));
            DisplayProduct();
          }
        });
        Increase.addEventListener("click", () => {
          product.quantity++;
          localStorage.setItem("cart", JSON.stringify(Cart));
          DisplayProduct();
        });
        Remove.addEventListener("click", () => {
          Cart = Cart.filter((ele) => {
            return ele.id !== product.id;       
            location.reload()
          });
          
          localStorage.setItem("cart", JSON.stringify(Cart));
          DisplayProduct();
          Swal.fire({
              position: 'center',
              icon: 'success',
              title: 'Item Deleted from Cart',
              showConfirmButton: false,
              timer: 1500
            })
        });
        card.append(
          image,
          price,
          details,
          Increase,
          quantity,
          Decrease,
          Remove
        );
        CartContainer.append(card);
      });

      let sum = 0;
      for (let i = 0; i < Cart.length; i++) {
        sum += Math.floor(Cart[i].price * Cart[i].quantity); 
      }
      originalprice.textContent = sum;
      savings.textContent = (sum * 0.05).toFixed(2);
      delivery.textContent =(sum * 0.1).toFixed(2);
      tax.textContent = (sum * 0.1).toFixed(2);


      total.textContent = eval(Math.floor(sum - sum * 0.05 + sum * 0.1));

    }

    DisplayProduct();

    // Write all necessery JS here

    // localStorage.setItem("cart", JSON.stringify(Cart));
    let user = document.querySelector(".signin");
  user.onclick = () => {
    location.href = "./login.html";
  };
  let order = document.querySelector(".orders");
  order.onclick = () => {
    location.href = "./wish.html";
  };
 
  let bag = document.querySelector(".bag");
  bag.onclick = () => {
    location.href = "./cart.html";
  };

  </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</html>
